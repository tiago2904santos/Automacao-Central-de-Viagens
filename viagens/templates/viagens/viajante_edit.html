{% extends "viagens/base.html" %}
{% load static %}

{% block title %}Editar viajante{% endblock %}

{% block breadcrumb %}
  Viajantes <span class="breadcrumb-sep">/</span> Editar
{% endblock %}

{% block content %}
  <h2 class="page-title">Editar viajante</h2>
  <p class="page-subtitle">Atualize os dados do servidor cadastrado.</p>

  <div class="page-grid">
    <div class="card">
      <form method="post">
        {% csrf_token %}
        {% if erros %}
          <div class="error">Revise os campos destacados.</div>
        {% endif %}
        <section class="grid">
          <label>
            Nome
            <input type="text" name="nome" value="{{ viajante.nome }}" required data-uppercase="true" />
            {% if erros.nome %}<span class="field-errors">{{ erros.nome }}</span>{% endif %}
          </label>
          <label>
            RG
            <input type="text" name="rg" value="{{ viajante.rg }}" required data-mask="rg" inputmode="numeric" />
            {% if erros.rg %}<span class="field-errors">{{ erros.rg }}</span>{% endif %}
          </label>
          <label>
            CPF
            <input type="text" name="cpf" value="{{ viajante.cpf }}" required data-mask="cpf" inputmode="numeric" />
            {% if erros.cpf %}<span class="field-errors">{{ erros.cpf }}</span>{% endif %}
          </label>
          <label>
            Telefone
            <input type="text" name="telefone" value="{{ viajante.telefone }}" data-mask="telefone" inputmode="numeric" />
          </label>
          <label class="full">
            Cargo
            <select name="cargo" required data-cargo-select>
              <option value="">Selecione</option>
              {% for cargo in cargo_choices %}
                <option value="{{ cargo }}" {% if cargo == viajante.cargo %}selected{% endif %}>{{ cargo }}</option>
              {% endfor %}
            </select>
            {% if erros.cargo %}<span class="field-errors">{{ erros.cargo }}</span>{% endif %}
            <button class="btn-clear btn-small" type="button" data-add-cargo>Adicionar cargo</button>
            <input type="text" name="cargo_novo" value="" data-cargo-novo hidden />
          </label>
        </section>

        <div class="wizard-actions">
          <a class="btn-clear" href="{% url 'viajantes_lista' %}">Voltar</a>
          <button class="btn-primary" type="submit">Salvar alteracoes</button>
          <button class="btn-danger" type="button" data-confirm-open="#confirmDeleteViajante">Excluir</button>
        </div>
      </form>
    </div>

    <div class="illustration-card">
      <div class="icon">üëÆ‚Äç‚ôÇÔ∏è</div>
      <h3>Dados do viajante</h3>
      <p>Evite duplicidades e mantenha o cadastro atualizado.</p>
      <p class="muted">A exclusao e permanente.</p>
    </div>
  </div>

  <div class="confirm-backdrop" id="confirmDeleteViajante" data-confirm-modal>
    <div class="confirm-card">
      <h3>Excluir viajante?</h3>
      <p>Esta acao remove o cadastro permanentemente.</p>
      <form method="post">
        {% csrf_token %}
        <input type="hidden" name="action" value="delete" />
        <div class="modal-actions">
          <button class="btn-clear" type="button" data-confirm-close>Cancelar</button>
          <button class="btn-danger" type="submit">Excluir</button>
        </div>
      </form>
    </div>
  </div>
{% endblock %}

{% block scripts %}
  <script src="{% static 'viagens/viajante_form.js' %}"></script>
{% endblock %}
